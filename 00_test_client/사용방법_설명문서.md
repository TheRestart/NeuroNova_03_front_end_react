# NeuroNova CDSS 테스트 클라이언트 사용 방법

**작성일**: 2026-01-02
**버전**: 2.0
**대상**: NeuroNova CDSS Phase 3 (프론트엔드 고도화) 통합 테스트

**주요 변경 (v2.0)**:
- ✅ 자동 시작 스크립트 추가 (start-all-services.bat, start-react.bat)
- ✅ 비밀번호 간소화 (*123!@# → *123)
- ✅ WSL 환경 자동 감지 가이드
- ✅ 서비스 자동 시작 섹션 추가
- ✅ 문제 해결 섹션 확장

---

## 목차

1. [개요](#1-개요)
2. [시스템 요구사항](#2-시스템-요구사항)
3. [서버 시작하기](#3-서버-시작하기)
4. [로그인 및 권한](#4-로그인-및-권한)
5. [데이터베이스 초기 설정 (v3.0)](#5-데이터베이스-초기-설정-v30)
6. [핵심 기능: 의사 워크스테이션](#6-핵심-기능-의사-워크스테이션)
7. [주요 Use Case 테스트](#7-주요-use-case-테스트)
8. [문제 해결 (Troubleshooting)](#8-문제-해결-troubleshooting)

---

## 1. 개요

이 클라이언트는 NeuroNova CDSS 백엔드 API를 검증하고, 실제 의료 현장의 워크플로우를 시뮬레이션하기 위한 React 애플리케이션입니다.

### 주요 기능
- **👨‍⚕️ Doctor Workstation**: 프리미엄 글래스모피즘 UI 기반의 환자 관리 대시보드 (신규)
- **🚀 전 영역 통합 테스트**: UC01~UC10 모든 API를 인터랙티브하게 테스트
- **🖼️ PACS Viewer**: Orthanc 연동 및 OHIF v3 기반 영상 뷰어
- **🧬 유전체 데이터 시각화**: LIS 연동 BRCA1 변이 데이터 등 확인

---

## 2. 시스템 요구사항

### 필수 환경

| 구성 요소 | 요구사항 | 비고 |
|----------|---------|------|
| **Backend Stack** | Docker 컨테이너 15개 실행 중 | `docker-compose.dev.yml` 사용 |
| **Node.js** | v20.x 이상 | WSL Ubuntu-22.04 LTS 권장 |
| **브라우저** | Chrome/Edge 최신 버전 | **프리미엄 UI 최적화** |

---

## 3. 서버 시작하기

### 🚀 빠른 시작 (권장)

**Option 1: 통합 자동 시작 스크립트**

프로젝트 루트에서 [start-all-services.bat](../../start-all-services.bat)를 더블클릭하거나 실행하십시오.

```bash
# 프로젝트 루트에서
d:\1222\NeuroNova_v1\start-all-services.bat
```

**자동으로 실행되는 작업**:
1. ✅ Docker Desktop 상태 확인 및 자동 시작
2. ✅ Docker Compose 전체 스택 시작 (14개 컨테이너)
3. ✅ 서비스 초기화 대기 (30초)
4. ✅ React 클라이언트 시작 선택 (Y/N)

**Option 2: React 클라이언트만 시작**

Docker 서비스가 이미 실행 중인 경우:

```bash
# NeuroNova_03_front_end_react/00_test_client에서
start-react.bat
```

이 스크립트는 WSL 환경을 자동으로 감지하고 React 개발 서버를 시작합니다.

---

### 3-1. 수동 시작 방법 (고급)

**백엔드 서비스 기동 (Docker)**

```bash
# 프로젝트 루트에서 실행
cd d:\1222\NeuroNova_v1
docker-compose -f docker-compose.dev.yml up -d

# 서비스 상태 확인
docker-compose -f docker-compose.dev.yml ps
```

**프론트엔드 개발 서버 시작**

```bash
# WSL Ubuntu-22.04 환경에서 실행
cd /mnt/d/1222/NeuroNova_v1/NeuroNova_03_front_end_react/00_test_client

# 최초 1회 실행
npm install --legacy-peer-deps

# 개발 서버 시작
PORT=3001 npm start
```

접속 주소: `http://localhost:3001`

**⚠️ 주의사항**:
- React 개발 서버는 반드시 WSL Ubuntu-22.04 환경에서 실행해야 합니다.
- Windows 네이티브 환경에서는 OHIF Viewer 호환성 문제가 발생할 수 있습니다.
- WSL 설치가 안 되어 있다면: `wsl --install -d Ubuntu-22.04` (PowerShell 관리자 권한)

---

## 4. 로그인 및 권한

### 4-1. 개발 자동 로그인 (Dev Mode)

현재 개발 편의를 위해 **Auto-login**이 기본적으로 활성화되어 있습니다.

**자동 로그인 설정**:
- `.env.local` 파일에서 `REACT_APP_DEV_AUTO_LOGIN=true` 설정
- 기본 계정: `doctor` (`.env.local`의 `REACT_APP_DEV_MOCK_USER` 설정)
- 접속 즉시 자동으로 로그인되어 대시보드로 이동

**자동 로그인 비활성화**:
```bash
# .env.local 파일 수정
REACT_APP_DEV_AUTO_LOGIN=false
```

### 4-2. 역할별 계정 정보

수동 로그인 시 다음 계정을 사용하십시오:

| 역할 | 아이디 | 비밀번호 | 특이사항 |
|------|--------|----------|----------|
| **의사** | `doctor` | `doctor123` | 워크스테이션 주사용자 |
| **관리자** | `admin` | `admin123` | 시스템 전체 권한 |
| **간호사** | `nurse` | `nurse123` | 간호 업무 권한 |
| **환자** | `patient` | `patient123` | 환자 포털 접근 |
| **방사선사** | `radiologist` | `radiologist123` | 영상 판독 권한 |
| **검사실기사** | `labtech` | `labtech123` | 검사 결과 입력 |

**비밀번호 정책 (v2.0)**:
- 개발 환경: `{ID}123` 형식으로 간소화 (이전: `{ID}123!@#`)
- 프로덕션 환경: 강력한 비밀번호 필수 (8자 이상, 영문/숫자/특수문자 조합)

---

## 5. 데이터베이스 초기 설정 (v3.0)

데이터가 비어있거나 초기화가 필요한 경우 아래 스크립트를 실행하십시오. **(v3.0은 DB 컬럼 매핑 오류가 해결된 버전입니다)**

### 5-1. 테스트용 계정 생성
```bash
docker exec neuronova-django-dev python manage.py create_test_users
```

### 5-2. 통합 데이터 시딩 (추천)
모든 모듈(UC01~UC05)을 한 번에 검증할 수 있는 핵심 데이터를 생성합니다.
```bash
# 핵심 데이터만 빠르게 (추천)
docker exec neuronova-django-dev python seed_minimal.py

# 또는 전수 조사를 위한 전체 데이터
docker exec neuronova-django-dev python seed_full_system_test_data.py
```

---

## 6. 핵심 기능: 의사 워크스테이션

상단 내비게이션 바의 **👨‍⚕️ WORKSTATION** 메뉴를 통해 접근합니다.

- **환자 카드**: 시딩된 환자(박민수, 홍길동 등)가 상태별(WAITING 등)로 표시됩니다.
- **프리미엄 UI**: 글래스모피즘 아키텍처가 적용된 세련된 디자인을 제공합니다.
- **진료 시작**: 환자 카드의 버튼을 통해 EMR/RIS 상세 화면으로 즉시 연결됩니다.

---

## 7. 주요 Use Case 테스트

- **UC04 LIS**: `sub-0005` 환자의 BRCA1 유전체 검사 결과를 확인하십시오.
- **UC05 RIS**: Patient 리스트에서 Study UID를 클릭하여 뷰어로 연동되는지 확인하십시오.
- **UC07 알림**: 가상 환자 도착 시 상단 대시보드에 실시간 알림이 뜨는지 확인하십시오. (개발 예정)

---

## 8. 문제 해결 (Troubleshooting)

### Q1. 화면 전체를 가리는 React 에러 팝업이 뜹니다.
- **해결**: `ResponseTable.js`의 Hook 위반 이슈는 2026-01-02 업데이트로 **해결되었습니다**. 최신 코드를 pull 받고 브라우저를 새로고침(F5) 하십시오.

### Q2. 로그인 버튼 클릭 시 아무 반응이 없습니다.
- **원인**: 백엔드 컨테이너가 중단되었을 가능성
- **해결**:
  ```bash
  docker ps
  docker-compose -f docker-compose.dev.yml restart django
  ```

### Q3. Docker Desktop이 시작되지 않습니다.
- **원인**: Docker Desktop이 실행되지 않음
- **해결**:
  1. 작업 표시줄에서 Docker 아이콘 확인 (초록색 = 정상)
  2. 수동 시작: `C:\Program Files\Docker\Docker\Docker Desktop.exe`
  3. 30초 대기 후 `start-all-services.bat` 재실행

### Q4. WSL 환경에서 npm start가 실패합니다.
- **원인**: WSL이 설치되지 않았거나 Ubuntu-22.04가 없음
- **해결**:
  ```bash
  # PowerShell 관리자 권한으로 실행
  wsl --install -d Ubuntu-22.04

  # 설치 후 재부팅
  # Ubuntu 사용자 계정 생성
  # start-react.bat 재실행
  ```

### Q5. 포트 충돌 에러가 발생합니다.
- **증상**: `ERROR: for django  Cannot start service django: Ports are not available`
- **해결**:
  ```bash
  # 포트 사용 중인 프로세스 확인
  netstat -ano | findstr :8000

  # 프로세스 종료 (PID 확인 후)
  taskkill /PID <PID> /F

  # Docker Compose 재시작
  docker-compose -f docker-compose.dev.yml down
  docker-compose -f docker-compose.dev.yml up -d
  ```

### Q6. 파바콘(favicon) 에러가 로그에 뜹니다.
- **해결**: 더미 파일 추가로 해결되었습니다. 기능상에는 지장이 없습니다.

### Q7. React 화면이 흰색 빈 화면으로 표시됩니다.
- **원인**: API 서버 연결 실패 또는 빌드 오류
- **해결**:
  1. 브라우저 개발자 도구(F12) → Console 탭에서 에러 확인
  2. Network 탭에서 API 요청 실패 확인
  3. Backend 상태 확인: `docker-compose ps`
  4. React 서버 재시작: `Ctrl+C` 후 `PORT=3001 npm start`

---

## 9. 서비스 접속 URL

| 서비스 | URL | 계정 | 설명 |
|--------|-----|------|------|
| **React Client** | http://localhost:3001 | doctor/doctor123 | 개발 자동 로그인 |
| **Django API** | http://localhost/api | - | REST API (Nginx 경유) |
| **Swagger UI** | http://localhost/api/docs/ | - | API 문서 |
| **Grafana** | http://localhost:3000 | admin/admin123 | 시스템 모니터링 |
| **OpenEMR** | http://localhost:8081 | admin/pass | EMR 시스템 |
| **Orthanc PACS** | http://localhost:8042 | orthanc/orthanc | DICOM 서버 |
| **Flower** | http://localhost:5555 | - | Celery 모니터링 |

---

## 10. 관련 문서

- **자동 실행 가이드**: [README_자동실행.md](../../../README_자동실행.md)
- **빠른 온보딩**: [REF_CLAUDE_ONBOARDING_QUICK.md](../../../01_doc/REF_CLAUDE_ONBOARDING_QUICK.md)
- **초기 데이터 시딩**: [초기_데이터_시딩_가이드.md](../../../01_doc/초기_데이터_시딩_가이드.md)
- **GCP 배포 가이드**: [12_GCP_배포_가이드.md](../../../01_doc/12_GCP_배포_가이드.md)
- **프론트엔드 작업 로그**: [FRONTEND_WORK_LOG.md](FRONTEND_WORK_LOG.md)

---

**작성**: NeuroNova Development Team
**최종 업데이트**: 2026-01-02 (v2.0)
**프로젝트 상태**: Phase 3.1 진행 중

# 🩺 NeuroNova Frontend Codebase Audit Report (2026-01-03)

**작성자**: Frontend QA Engineer (Antigravity)
**대상**: `NeuroNova_03_front_end_react/00_test_client`
**검사 범위**: Pages, Components, API Client

---

## 🛑 Critical Issues (High Severity)

### P-001
- **위치**: `src/pages/MonitoringPage.js` (Lines 23-55, `monitoringAPI.checkAllHealth`)
- **기능명**: 시스템 헬스 체크 시각화
- **문제 정의**:
  - `monitoringAPI.checkAllHealth` 함수가 실제 Prometheus, Grafana, Alertmanager의 상태를 확인하지 않고 무조건 **"PASS"** 또는 **"UNKNOWN"**으로 하드코딩된 값을 반환함.
  - 이는 운영자에게 **거짓된 시스템 안정성 정보**를 제공하여 장애 발생 시 대응을 지연시킬 수 있음.
- **심각도**: **High**
- **카테고리**: **Logic Error**

### P-003
- **위치**: `src/pages/DoctorWorkstation.js` (Line 18, `fetchPatients`)
- **기능명**: 대기 환자 목록 조회
- **문제 정의**:
  - `emrAPI.getPatients()` 호출 시 페이지네이션 파라미터가 없어, 데이터베이스의 **모든 환자**를 한 번에 불러오려 시도함.
  - 환자 수가 수천 명 이상으로 늘어날 경우 **브라우저 멈춤(Freezing)** 또는 **메모리 초과(OOM)** 발생 가능성 높음.
- **심각도**: **High**
- **카테고리**: **Runtime Error / Performance**

### P-007
- **위치**: `src/pages/LoginPage.js` (Line 38, `testAccounts`)
- **기능명**: 빠른 로그인 (Quick Login)
- **문제 정의**:
  - 관리자(`admin`) 및 의료진 계정의 비밀번호가 클라이언트 사이드 코드에 **평문(Plain Text)으로 하드코딩**되어 있음.
  - 빌드된 JS 파일(Chunk)을 분석하면 누구나 관리자 권한을 탈취할 수 있는 치명적인 보안 결함.
- **심각도**: **High**
- **카테고리**: **Security / Logic Error**

---

## ⚠️ Major Issues (Medium Severity)

### P-004
- **위치**: `src/pages/PatientDetailPage.js` (Lines 48-63)
- **기능명**: 환자 상세 대시보드 내비게이션
- **문제 정의**:
  - "진료 기록", "처방 내역", "영상 검사" 카드 클릭 시 해당 환자의 문맥(Context)을 유지하지 않고 **전체 목록 페이지(`/uc02`, `/uc05` 등)로 이동**함.
  - 의사가 특정 환자를 진료하다가 다시 목록에서 환자를 검색해야 하는 심각한 **Workflow 단절** 발생.
- **심각도**: **Medium**
- **카테고리**: **UI/UX Inconsistency**

### P-008
- **위치**: `src/pages/ViewerPage.js` (Line 122)
- **기능명**: OHIF Viewer 임베딩
- **문제 정의**:
  - OHIF Viewer URL 구성 시 `process.env.REACT_APP_OHIF_VIEWER_ROOT` 의존성이 높으며, 기본값(`http://localhost/pacs-viewer`)이 개발 환경(Port 3000)과 불일치할 가능성 높음.
  - `iframe` 통신 정책(Cross-Origin) 설정이 미비하여, 실제 배포 시 뷰어가 로딩되지 않을 수 있음.
- **심각도**: **Medium**
- **카테고리**: **Configuration / Runtime Error**

### P-006
- **위치**: `src/pages/PatientDicomMappingPage.js` (Line 29, `handleSyncStudies`)
- **기능명**: Orthanc 대량 동기화
- **문제 정의**:
  - 실행 시간이 오래 걸릴 수 있는 동기화 작업(수천 건의 Study)을 단순 `await`로 호출함.
  - 백엔드 처리가 30초(Axios Query Timeout)를 초과할 경우, 작업은 백그라운드에서 계속되나 프론트엔드는 **Timeout Error**를 뱉고 실패로 간주함.
- **심각도**: **Medium**
- **카테고리**: **API/Async Issue**

---

## ℹ️ Minor Issues (Low Severity)

### P-002
- **위치**: `src/pages/MonitoringPage.js` (Line 211, `getBg`)
- **기능명**: 서비스 노드 배경색 UI
- **문제 정의**:
  - 시각적 복잡도를 줄이기 위해 배경색을 회색(`#F9FAFB`)으로 통일했으나, 이로 인해 `type` (Core, DB, External) 간의 **시각적 구분**이 사라짐.
  - 상태 테두리(Border)에만 의존해야 하므로 직관성이 다소 저하됨.
- **심각도**: **Low**
- **카테고리**: **UI/UX Inconsistency**

### P-005
- **위치**: `src/pages/ViewerPage.js` (Lines 80-88, `ToolButton`)
- **기능명**: 뷰어 툴바 (Zoom, Pan, W/L)
- **문제 정의**:
  - 툴바 버튼들이 UI 껍데기(Shell)로만 구현되어 있고, 실제 `iframe` 내부의 OHIF Viewer를 제어하는 **기능이 연결되어 있지 않음**.
  - 사용자가 버튼을 눌러도 아무 반응이 없어 "고장난 기능"으로 오인할 수 있음.
- **심각도**: **Low**
- **카테고리**: **UI/UX Inconsistency**
- **카테고리**: **UI/UX Inconsistency**

---

## 🚨 Runtime & Structural Issues (User Reported)

### P-009
- **위치**: `src/api/apiClient.js` (Global)
- **기능명**: 백엔드 API 통신
- **문제 정의**:
  - 브라우저 런타임 검사 결과, `http://localhost:8000`으로 향하는 모든 요청이 **`net::ERR_CONNECTION_REFUSED`** 로 실패함.
  - 백엔드(Django) 컨테이너가 실행되지 않았거나 포트 포워딩 설정이 누락되어, 프론트엔드의 거의 모든 기능이 마비됨.
  - 콘솔에 **500 Internal Server Error** (AI 페이지 등) 및 네트워크 에러가 다수 발생.
- **심각도**: **High**
- **카테고리**: **Runtime Error / Infrastructure**

### P-010
- **위치**: `src/pages/DoctorWorkstation.js`, `src/pages/PatientDetailPage.js`
- **기능명**: 데이터 로딩 UI 피드백 (Loading UX)
- **문제 정의**:
  - API 요청 실패 시(위 P-009 상황), 화면이 "로딩 중..." 상태에서 영원히 멈추거나(Infinite Spinner), 사용자에게 명확한 **재시도(Retry) 버튼**이나 **에러 원인**을 제공하지 않음.
  - 사용자는 시스템이 멈춘 것인지, 느린 것인지 판단할 수 없어 UX 품질이 심각하게 저하됨.
- **심각도**: **Medium**
- **카테고리**: **UI/UX Inconsistency**

### P-011
- **위치**: `src/App.js` (Navigation Bar)
- **기능명**: 메인 내비게이션 구조 (Information Architecture)
- **문제 정의**:
  - 상단 메뉴바에 15개 이상의 메뉴(UC01~UC09, 모니터링, 워크스테이션 등)가 평면적으로 나열되어 있어 **시각적 인지 부하(Cognitive Load)**가 높음.
  - '임상 업무(Workstation, Detail)'와 '시스템 관리(Monitoring, Audit)', '테스트 도구(Test Pages)'가 그룹화되지 않아 목적에 따른 접근이 어려움.
- **심각도**: **Low**
- **카테고리**: **UI/UX Inconsistency**

### P-012
- **위치**: `src/pages/PatientDetailPage.js` vs `src/pages/DoctorWorkstation.js`
- **기능명**: 카드(Card) UI 일관성 (Visual Consistency)
- **문제 정의**:
  - 두 페이지 모두 'Glassmorphism' 스타일을 지향하나, `PatientDetailPage`의 카드들은 클릭 가능한 버튼 역할임에도 `DoctorWorkstation`의 환자 카드와 **호버(Hover) 효과, 패딩, 폰트 계층 구조**가 미묘하게 달라 디자인 통일성이 부족함.
- **심각도**: **Low**
- **카테고리**: **UI/UX Inconsistency**

---

## 🔒 Security & Privacy Risks (Deep Audit)

### P-013
- **위치**: `src/components/APITester.js`, `src/pages/UC01AuthTest.js`
- **기능명**: API 파라미터 입력 및 에러 로깅
- **문제 정의**:
  - `APITester` 컴포넌트가 `console.error('API Error:', err)`를 실행할 때, `err.config` 객체가 포함될 경우 **사용자 비밀번호(Plaintext)**가 브라우저 콘솔에 그대로 노출될 위험이 있음.
  - 테스트 도구 특성상 비밀번호 입력 필드(`type="password"`)가 존재하나, 화면상 마스킹만 될 뿐 내부 로직에서는 보호되지 않음.
- **심각도**: **High**
- **카테고리**: **Security Vulnerability**

### P-014
- **위치**: `src/pages/UC01AuthTest.js` (전체)
- **기능명**: 테스트 계정 생성 폼
- **문제 정의**:
  - `defaultParams`에 비밀번호 필드가 빈 문자열로 초기화되어 있으나, 사용자가 입력 후 '초기화'를 누르지 않으면 컴포넌트 언마운트 전까지 메모리에 평문으로 잔존함.
  - 공용 PC에서 테스트 시 보안 사고로 이어질 수 있음.
- **심각도**: **Medium**
- **카테고리**: **Security Vulnerability**

---

## 🏗 Code Quality & Best Practices

### P-015
- **위치**: `src/pages/AllAPITest.js` (Line 53)
- **기능명**: `runAllTests` (순차 실행 로직)
- **문제 정의**:
  - `for (const testCase of testCases) { await testCase.api() }` 루프가 **완전 순차적(Sequential)**으로 실행됨.
  - 테스트 케이스가 50개 이상으로 늘어날 경우, 전체 실행 시간이 기하급수적으로 증가(예: 타임아웃 30초 * 50개 = 25분 소요).
  - `Promise.all` 또는 `Batch Processing`으로 병렬 처리가 고려되지 않음.
- **심각도**: **Medium**
- **카테고리**: **Code Quality / Performance**

### P-016
- **위치**: `src/pages/AllAPITest.js` (Line 102)
- **기능명**: 결과 상태 업데이트
- **문제 정의**:
  - 루프 내부에서 `setResults([...testResults])`를 매 반복(Iteration)마다 호출함.
  - 이는 **N번의 불필요한 Re-render**를 유발하여 브라우저 메인 스레드를 차단(Blocking)하고 UI 반응성을 떨어뜨림.
- **심각도**: **Medium**
- **카테고리**: **Performance**

### P-017
- **위치**: `src/api/apiClient.js`
- **기능명**: API 클라이언트 구성
- **문제 정의**:
  - `monitoringAPI.checkAllHealth` 로직이 실제 백엔드 상태를 반영하지 않고 **Mock Data(가짜 성공)**를 반환하도록 하드코딩되어 있음 (`results.prometheus = "PASS ..."`).
  - 이는 운영자에게 "시스템이 정상"이라는 **거짓 정보(False Positive)**를 주어 장애 대응을 지연시키는 치명적 설계 오류임.
- **심각도**: **High**
- **카테고리**: **Logic Error**

### P-018
- **위치**: `src/pages/UC04LISTest.js`, `src/pages/UC06AITest.js`
- **기능명**: 테스트 데이터 하드코딩
- **문제 정의**:
  - `exampleData`에 `patient_id: 'sub-0004'`, `order_id: 'O-2026-0001'` 등 **특정 환경에 종속된 ID**가 하드코딩됨.
  - DB 초기화 후나 다른 개발자의 로컬 환경에서는 해당 ID가 존재하지 않아(Foreign Key Error) 테스트가 즉시 실패함. '동적 데이터 생성' 흐름이 부재함.
- **심각도**: **Low**
- **카테고리**: **Maintainability**

### P-019
- **위치**: `src/components/APITester.js`
- **기능명**: 대용량 데이터 렌더링
- **문제 정의**:
  - `setResponse(result.data)`로 수 킬로바이트~메가바이트 단위의 JSON(예: DICOM 태그, 영상 리스트)을 React State에 직접 저장.
  - `ResponseTable`이나 `JSON.stringify` 렌더링 시 **브라우저 메모리 스파이크** 발생 가능성 높음. (Windowing/Pagination 미적용).
- **심각도**: **Medium**
- **카테고리**: **Performance**

---

## 🧩 Test Logic & Reliability (Edge Cases)

### P-020
- **위치**: `src/pages/AllAPITest.js`
- **기능명**: 프로그레스 바 (Line 246)
- **문제 정의**:
  - `results.length`에 의존하여 진행률을 표시하나, 루프 중간에 `unhandled promise rejection`으로 스크립트가 중단될 경우 진행 바가 영구히 멈춤.
  - 사용자에게 "멈춤"인지 "진행 중"인지 알릴 Time-based Timeout 피드백이 없음.
- **심각도**: **Low**
- **카테고리**: **Reliability**

### P-021
- **위치**: `src/pages/UC06AITest.js`
- **기능명**: Segmentation 이미지 경로 표시
- **문제 정의**:
  - `job.segmentation_path` (서버 내부 경로, `/var/lib/...`)를 그대로 UI에 노출.
  - 웹 브라우저는 로컬 파일 시스템에 접근할 수 없으므로, 이 경로는 **사용자에게 아무런 가치가 없는 정보(Useless Information)**임.
  - 프리사인 URL(Presigned URL)이나 Blob 스트리밍 URL로 변환하여 제공해야 함.
- **심각도**: **Low**
- **카테고리**: **UX Logic**

### P-022
- **위치**: `src/pages/PatientDetailPage.js`
- **기능명**: 네비게이션 컨텍스트 유실
- **문제 정의**:
  - 환자 상세 페이지(`P-001`)에서 '처방 내역' 클릭 시 `/uc02`(테스트 페이지)로 이동하며 **`patient_id` 파라미터가 유실됨**.
  - 사용자는 테스트 페이지에서 다시 환자 ID를 수동 입력해야 하는 **심각한 워크플로우 단절** 경험.
- **심각도**: **Medium**
- **카테고리**: **UX Flow**

### P-023
- **위치**: `src/api/apiClient.js`
- **기능명**: 타임아웃 설정 부재
- **문제 정의**:
  - Axios 인스턴스에 명시적인 `timeout` 설정이 확인되지 않음(기본값: 무제한).
  - 백엔드 행(Hang) 발생 시 프론트엔드 요청이 영원히 대기 상태(Pending)로 남을 수 있음.
- **심각도**: **Low**
- **카테고리**: **Stability**

### P-024
- **위치**: `package.json`
- **기능명**: 의존성 관리
- **문제 정의**:
  - `react-scripts` v5.0.1 사용 중이나, `eslintConfig`가 기본 `react-app`으로만 설정되어 있어, `useEffect` 의존성 배열 누락 등의 잠재적 버그를 엄격하게 잡지 못할 수 있음.
- **심각도**: **Low**
- **카테고리**: **Maintenance**

### P-025
- **위치**: `src/pages/UC05RISTest.js`, `src/pages/ViewerPage.js`
- **기능명**: Viewer URL 생성 로직
- **문제 정의**:
  - `studyInstanceUID`를 쿼리 파라미터나 URL 경로로 결합할 때, URL Encoding (`encodeURIComponent`) 처리가 누락되어 있음.
  - UID에 특수문자가 포함될 경우(드물지만 표준상 가능), 링크가 깨지거나 잘못된 리소스를 요청할 수 있음.
- **심각도**: **Low**
- **카테고리**: **Logic / Robustness**

### P-026
- **위치**: `src/pages/UC03OCSTest.js` (Line 44-64)
- **기능명**: 처방 입력 폼
- **문제 정의**:
  - 필수 필드(`required`)가 HTML5 속성으로만 지정되어 있어, 구형 브라우저나 API 직접 호출 시 방어 로직이 없음.
  - 프론트엔드 유효성 검사(Validation) 로직(예: 날짜 형식, 숫자 범위)이 전무하여, 잘못된 데이터가 백엔드로 전송되어 **400 Bad Request**를 유발함.
- **심각도**: **Low**
- **카테고리**: **Data Integrity**

### P-027
- **위치**: `package.json` (Line 38)
- **기능명**: 브라우저 지원 범위 (`browserslist`)
- **문제 정의**:
  - `"production": [">0.2%", "not dead", "not op_mini all"]`로 설정됨.
  - 병원 환경 특성상 **구형 브라우저(IE11, 구형 Edge)**를 사용하는 경우가 많으나, 이에 대한 호환성 검토나 폴리필(Polyfill) 전략이 명시되지 않음.
- **심각도**: **Low**
- **카테고리**: **Compatibility**

### P-028
- **위치**: `src/index.js` (추정)
- **기능명**: Strict Mode
- **문제 정의**:
  - React 18의 `StrictMode`는 개발 환경에서 Effect를 두 번 실행함.
  - `AllAPITest`나 `MonitoringPage`의 `useEffect` 내 API 호출이 중복 실행되어, 개발자에게 "API가 왜 두 번 호출되지?"라는 혼란을 주고 불필요한 트래픽을 유발할 수 있음. (클린업 함수 부재 시 더욱 심각).
- **심각도**: **Low**
- **카테고리**: **DX (Developer Experience)**

### P-029
- **위치**: `src/utils/devAutoLogin.js`
- **기능명**: 자동 로그인 유틸리티
- **문제 정의**:
  - 파일명이 `devAutoLogin.js`이나, 프로덕션 빌드에서도 번들에 포함됨.
  - 트리쉐이킹(Tree Shaking)이 되지 않는 구조라면, 해커가 해당 코드를 역공학하여 로그인 로직의 취약점을 분석할 힌트를 얻을 수 있음.
- **심각도**: **Medium**
- **카테고리**: **Security / Build Optimization**

### P-030
- **위치**: `src/components/ResponseTable.js`
- **기능명**: JSON 데이터 뷰어
- **문제 정의**:
  - API 응답을 보여주는 핵심 컴포넌트이나, **"클립보드 복사(Copy to Clipboard)"** 버튼이 없음.
  - 개발자가 긴 JSON 응답을 복사하려면 드래그해야 하며, 이는 디버깅 효율성을 크게 떨어뜨림.
- **심각도**: **Low**
- **카테고리**: **UI/UX (Developer Tooling)**

---

## 🛑 Functionality Defect (Verified Failed)

### P-031
- **위치**: `src/components/APITester.js` (Line 22, `handleExampleInput`)
- **기능명**: 예시 입력 (Example Input) 버튼
- **문제 정의**:
  - **[Verified]** 버튼 클릭 시 **아무런 반응이 없음 (Silent Failure)**. 콘솔 에러조차 발생하지 않음.
  - 원인: `UC06AITest.js` 등 상위 컴포넌트에서 `exampleData` Prop을 넘겨주지 않아, `handleExampleInput` 함수가 빈 객체(defaultParams)로 덮어쓰기만 수행함.
  - 사용자 입장에서는 "버튼이 고장난 것"으로 보임.
- **심각도**: **Medium**
- **카테고리**: **Functional Defect**

### P-032
- **위치**: `src/pages/ViewerPage.js`
- **기능명**: OHIF Viewer 데이터 로딩
- **문제 정의**:
  - **[Verified]** Viewer 로딩 시 UI가 깨지고(내비게이션 중첩), 데이터가 로드되지 않음.
  - **기술적 원인 (Browser Log)**:
    1. **React Router Hijacking**: `No routes matched location...` 경고 발생. Iframe의 `src` 경로가 정적 파일(`/public/viewer/index.html`)이 아닌 라우터 경로로 인식되어, **Viewer 대신 React 앱(404 페이지)을 Iframe 안에 렌더링**하고 있음.
    2. **Connection Refused**: 백엔드 포트(8000) 연결 불가로 메타데이터 로딩 실패.
- **심각도**: **High**
- **카테고리**: **Functional Defect / Integration**

### P-033
- **위치**: **Infrastructure (Docker)**
- **기능명**: 백엔드 서비스 (Django)
- **문제 정의**:
  - **[Root Cause Verified]** 사용자가 Docker를 실행했음에도(`docker-compose up`), **백엔드 컨테이너가 실행되지 않음 (Exited or Not Created)**.
  - `docker ps` 확인 결과, `nginx`는 Unhealthy 상태이며, `backend` 컨테이너는 포트 8000을 리스닝하고 있지 않음.
  - 이로 인해 `P-009` (Connection Refused)와 `P-032` (Viewer Loading Fail)가 지속됨.
- **심각도**: **Critical**
- **카테고리**: **Infrastructure / Deployment**
